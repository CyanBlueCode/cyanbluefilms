(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{1083:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>b});var a=r(7876),i=r(9099),l=r(4232),o=r(6520),n=r(7268),s=r(5480),h=r(6924),d=r(441);r(9986),r(806);var c=r(964),u=r(1863),p=r(5965),g=r(6378);let m=()=>(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"1rem"},children:[...Array(12)].map((t,e)=>(0,a.jsx)(g.A,{variant:"rectangular",width:"100%",height:300,sx:{borderRadius:1}},e))}),f=t=>{let{photos:e}=t,r=(0,c.A)(),i=(0,u.A)(r.breakpoints.down("sm")),[o,n]=(0,l.useState)(!1),[g,f]=(0,l.useState)(0),[x,w]=(0,l.useState)([]),[y,b]=(0,l.useState)(!0),[v,j]=(0,l.useState)(!1),_=(0,l.useRef)(0);(0,l.useEffect)(()=>{w(e.map((t,e)=>({...t,width:t.width||3,height:t.height||2,loaded:!1,index:e})))},[e]);let k=t=>r=>{var a;if(null==(a=x[t])?void 0:a.loaded)return;let i=r.target,l=i.naturalWidth,o=i.naturalHeight;w(e=>{let r=[...e];return r[t]={...r[t],width:l,height:o,loaded:!0},r}),_.current++,_.current===e.length&&b(!1)},A=t=>{f(t),n(!0),j(!0)},C=t=>{t===g&&j(!1)},P=x.map(t=>({src:t.thumbnailUrl,width:t.width,height:t.height,alt:t.title||"Gallery image",key:t.id})),E=e.map(t=>({src:t.imageUrl,alt:t.title||"Gallery image"}));return(0,a.jsxs)("div",{style:{margin:"2rem 0"},children:[y?(0,a.jsx)(m,{}):(0,a.jsx)(s.A,{photos:P.filter(t=>t.width>0&&t.height>0),layout:"rows",spacing:8,targetRowHeight:300,rowConstraints:{maxPhotos:i?2:4,minPhotos:1,singleRowMaxHeight:i?200:300},onClick:t=>{let{index:e}=t;return A(e)}}),(0,a.jsx)("div",{style:{display:"none"},children:e.map((t,e)=>(0,a.jsx)("img",{src:t.thumbnailUrl,alt:"preloader",onLoad:k(e),onError:()=>k(e)({target:{naturalWidth:t.width||3,naturalHeight:t.height||2}})},e))}),(0,a.jsx)(h.Ay,{open:o,close:()=>{n(!1),j(!1)},slides:E,index:g,plugins:[d.A],animation:{swipe:300},controller:{closeOnPullDown:!0,closeOnBackdropClick:!0},on:{slideLoading:t=>{let{index:e}=t;return C(e)}},render:{buttonPrev:o?void 0:null,buttonNext:o?void 0:null,iconClose:()=>(0,a.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{fill:"currentColor",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})}),iconLoading:()=>(0,a.jsx)(p.A,{size:24,color:"inherit"})},styles:{container:{backgroundColor:"rgba(0, 0, 0, 0.9)",maxHeight:"100vh",overflow:"hidden"},root:{"--yarl__color_backdrop":"rgba(0, 0, 0, 0.9)"},slide:{padding:i?"10px":"20px",boxSizing:"border-box"}}}),v&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1400},children:(0,a.jsx)(p.A,{size:60,color:"secondary"})})]})};var x=r(2554);let w="https://cbf-worker.cyanbluefilms.workers.dev",y=t=>{let{categoryName:e}=t,[r,i]=(0,l.useState)(!0),[s,h]=(0,l.useState)([]);return(0,l.useEffect)(()=>{e&&w&&(async()=>{try{i(!0);let t=await fetch("".concat(w,"/folder-images?folder=/portfolio/").concat(e));if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to fetch images")}let r=(await t.json()).map(t=>({id:t.id,title:t.name,filePath:t.filePath,thumbnailUrl:(0,x.s4)(t.filePath),imageUrl:(0,x.Qc)(t.filePath)}));h(r)}catch(t){console.error("Error fetching gallery images:",t)}finally{i(!1)}})()},[e]),(0,a.jsxs)(o.A,{sx:{pt:15,pb:4},children:[(0,a.jsxs)(n.A,{variant:"h2",sx:{textAlign:"center",mb:4,textTransform:"capitalize"},children:[e," Gallery"]}),r?(0,a.jsx)(m,{}):s.length>0?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(f,{photos:s})}):(0,a.jsx)(n.A,{variant:"h5",textAlign:"center",children:"No photos found for this category"})]})},b=()=>{let{pathname:t}=(0,i.useRouter)(),e=t.split("/")[2];return(0,a.jsx)(y,{categoryName:e})}},2554:(t,e,r)=>{"use strict";r.d(e,{Qc:()=>o,my:()=>n,s4:()=>l});var a=r(5364);let i=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new URLSearchParams;return e.width&&r.append("w",e.width),e.height&&r.append("h",e.height),e.quality&&r.append("q",e.quality),e.crop&&r.append("c",e.crop),e.format&&r.append("f",e.format),r.append("v",a.env.BUILD_ID),"".concat("https://ik.imagekit.io/cyanbluefilms").concat(t,"?").concat(r.toString())},l=t=>i(t,{width:600,height:600,crop:"at_least",quality:80,format:"webp"}),o=t=>i(t,{quality:85,format:"webp"}),n=t=>i(t,{width:800,height:800,crop:"at_least",quality:80,format:"webp"})},9510:(t,e,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/photo/street",function(){return r(1083)}])}},t=>{var e=e=>t(t.s=e);t.O(0,[279,636,593,792],()=>e(9510)),_N_E=t.O()}]);